.page--sokoban {
  --sokoban-surface: linear-gradient(160deg, rgba(18, 28, 46, 0.92), rgba(10, 14, 28, 0.95));
  --sokoban-border: rgba(126, 158, 228, 0.38);
  --sokoban-shadow: 0 28px 52px rgba(6, 10, 28, 0.6);
  --sokoban-text-primary: rgba(226, 234, 255, 0.94);
  --sokoban-text-muted: rgba(198, 210, 242, 0.74);
  --sokoban-wall-bg: linear-gradient(160deg, rgba(10, 12, 20, 0.95), rgba(18, 20, 32, 0.9));
  --sokoban-wall-border: rgba(90, 110, 168, 0.5);
  --sokoban-floor-bg: linear-gradient(150deg, rgba(36, 46, 78, 0.9), rgba(28, 34, 60, 0.85));
  --sokoban-target-ring: rgba(132, 208, 255, 0.75);
  --sokoban-target-core: rgba(84, 196, 255, 0.3);
  --sokoban-box-bg: linear-gradient(140deg, rgba(232, 152, 84, 0.95), rgba(210, 98, 56, 0.92));
  --sokoban-box-highlight: rgba(255, 236, 206, 0.7);
  --sokoban-player-bg: linear-gradient(140deg, rgba(142, 112, 255, 0.95), rgba(90, 186, 255, 0.92));
  --sokoban-player-glow: rgba(160, 210, 255, 0.85);
  padding: clamp(1rem, 4vw, 2.8rem) clamp(0.75rem, 4vw, 3rem);
}

.sokoban {
  display: grid;
  gap: clamp(1rem, 2.4vw, 2rem);
  max-width: min(960px, 100%);
  margin: 0 auto;
  color: var(--sokoban-text-primary);
}

.sokoban__header {
  display: flex;
  flex-direction: column;
  gap: clamp(0.75rem, 1.6vw, 1.25rem);
}

.sokoban__hud {
  display: flex;
  flex-wrap: wrap;
  gap: clamp(0.65rem, 1.6vw, 1rem);
}

.sokoban__stat {
  flex: 1 1 clamp(140px, 28%, 220px);
  min-width: clamp(120px, 26%, 200px);
  padding: clamp(0.65rem, 1.4vw, 0.9rem) clamp(0.9rem, 1.8vw, 1.25rem);
  border-radius: 1rem;
  border: 1px solid rgba(140, 170, 236, 0.32);
  background: rgba(20, 26, 48, 0.7);
  box-shadow: 0 18px 36px rgba(6, 10, 28, 0.45);
  display: grid;
  gap: 0.25rem;
}

.sokoban__stat-label {
  font-size: clamp(0.75rem, 1.6vw, 0.92rem);
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: var(--sokoban-text-muted);
}

.sokoban__stat-value {
  font-size: clamp(1.4rem, 3.6vw, 2rem);
  font-weight: 700;
}

.sokoban__actions {
  display: flex;
  flex-wrap: wrap;
  gap: clamp(0.5rem, 1.2vw, 0.8rem);
}

.sokoban__button {
  appearance: none;
  border-radius: 999px;
  border: 1px solid rgba(132, 168, 252, 0.55);
  padding: clamp(0.5rem, 1.4vw, 0.75rem) clamp(1.2rem, 3vw, 1.9rem);
  font-size: clamp(0.9rem, 2vw, 1.05rem);
  font-weight: 600;
  color: rgba(238, 244, 255, 0.95);
  background: linear-gradient(135deg, rgba(112, 168, 255, 0.36), rgba(144, 132, 255, 0.34));
  box-shadow: 0 18px 32px rgba(12, 18, 46, 0.46);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.sokoban__button:hover,
.sokoban__button:focus-visible {
  transform: translateY(-2px);
  box-shadow: 0 22px 36px rgba(14, 22, 54, 0.52);
  outline: none;
}

.sokoban__status {
  margin: 0;
  padding: clamp(0.6rem, 1.4vw, 0.9rem) clamp(0.9rem, 1.8vw, 1.3rem);
  border-radius: 1rem;
  border: 1px solid rgba(130, 162, 236, 0.28);
  background: rgba(18, 26, 46, 0.65);
  box-shadow: 0 16px 28px rgba(6, 10, 26, 0.4);
  color: var(--sokoban-text-primary);
  min-height: clamp(2.4rem, 4vw, 3rem);
}

.sokoban__hint {
  margin: 0;
  font-size: clamp(0.85rem, 1.8vw, 1rem);
  color: var(--sokoban-text-muted);
}

.sokoban__board-wrapper {
  display: flex;
  justify-content: center;
}

.sokoban__board {
  display: grid;
  grid-template-columns: repeat(var(--sokoban-width, 9), minmax(0, 1fr));
  gap: clamp(0.25rem, 1vw, 0.6rem);
  padding: clamp(0.8rem, 2vw, 1.4rem);
  border-radius: 1.4rem;
  background: var(--sokoban-surface);
  border: 1px solid var(--sokoban-border);
  box-shadow: var(--sokoban-shadow);
  min-width: min(280px, 100%);
  width: min(100%, clamp(320px, 90vw, 520px));
  touch-action: none;
  user-select: none;
}

.sokoban__cell {
  position: relative;
  aspect-ratio: 1 / 1;
  border-radius: 0.9rem;
  border: 1px solid rgba(128, 158, 230, 0.26);
  background: var(--sokoban-floor-bg);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
  overflow: hidden;
}

.sokoban__cell::before,
.sokoban__cell::after {
  content: '';
  position: absolute;
  inset: 16%;
  border-radius: 0.7rem;
  pointer-events: none;
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.sokoban__cell--wall {
  background: var(--sokoban-wall-bg);
  border-color: var(--sokoban-wall-border);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

.sokoban__cell--wall::before,
.sokoban__cell--wall::after {
  display: none;
}

.sokoban__cell--target::before {
  background: radial-gradient(circle, var(--sokoban-target-ring) 0%, rgba(0, 0, 0, 0) 68%);
  box-shadow: 0 0 22px rgba(118, 198, 255, 0.4);
  opacity: 1;
  transform: scale(1);
}

.sokoban__cell--target::after {
  background: radial-gradient(circle, var(--sokoban-target-core) 0%, rgba(0, 0, 0, 0) 70%);
  opacity: 0.85;
  transform: scale(0.8);
}

.sokoban__cell--box::after {
  inset: 18%;
  background: var(--sokoban-box-bg);
  border-radius: 0.35rem;
  box-shadow: inset 0 0 0.6rem rgba(0, 0, 0, 0.35), 0 12px 24px rgba(0, 0, 0, 0.4);
  opacity: 1;
  transform: scale(1);
}

.sokoban__cell--box::before {
  inset: 26%;
  background: radial-gradient(circle at 30% 25%, var(--sokoban-box-highlight) 0%, rgba(0, 0, 0, 0) 68%);
  border-radius: 0.4rem;
  opacity: 0.75;
  transform: scale(1);
}

.sokoban__cell--player::after {
  inset: 18%;
  border-radius: 999px;
  background: var(--sokoban-player-bg);
  box-shadow: 0 14px 28px rgba(40, 82, 158, 0.6), 0 0 18px var(--sokoban-player-glow);
  opacity: 1;
  transform: scale(0.9);
}

.sokoban__cell--player::before {
  inset: 30%;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.28);
  opacity: 0.7;
}

.sokoban__board:focus-visible {
  outline: 3px solid rgba(148, 188, 255, 0.5);
  outline-offset: 6px;
}

@media (min-width: 920px) {
  .sokoban {
    grid-template-columns: minmax(260px, 320px) minmax(0, 1fr);
    grid-template-areas: 'header board';
    align-items: start;
  }

  .sokoban__header {
    grid-area: header;
  }

  .sokoban__board-wrapper {
    grid-area: board;
  }
}

body.theme-light .page--sokoban {
  --sokoban-surface: linear-gradient(160deg, rgba(240, 246, 255, 0.98), rgba(212, 224, 255, 0.95));
  --sokoban-border: rgba(128, 148, 220, 0.32);
  --sokoban-shadow: 0 24px 44px rgba(94, 110, 180, 0.26);
  --sokoban-text-primary: rgba(24, 32, 58, 0.92);
  --sokoban-text-muted: rgba(48, 60, 102, 0.7);
  --sokoban-wall-bg: linear-gradient(160deg, rgba(196, 206, 236, 0.92), rgba(174, 188, 224, 0.9));
  --sokoban-wall-border: rgba(150, 168, 220, 0.55);
  --sokoban-floor-bg: linear-gradient(160deg, rgba(220, 232, 255, 0.95), rgba(200, 214, 248, 0.92));
  --sokoban-target-ring: rgba(40, 120, 220, 0.45);
  --sokoban-target-core: rgba(112, 170, 255, 0.35);
  --sokoban-box-bg: linear-gradient(140deg, rgba(236, 180, 108, 0.95), rgba(224, 134, 72, 0.92));
  --sokoban-player-bg: linear-gradient(140deg, rgba(122, 112, 246, 0.95), rgba(86, 160, 252, 0.92));
  --sokoban-player-glow: rgba(118, 160, 252, 0.65);
}

body.theme-light .sokoban__button {
  color: rgba(32, 40, 70, 0.92);
}

body.theme-neon .page--sokoban {
  --sokoban-surface: linear-gradient(160deg, rgba(32, 10, 62, 0.9), rgba(12, 6, 28, 0.92));
  --sokoban-border: rgba(178, 98, 255, 0.5);
  --sokoban-shadow: 0 32px 56px rgba(26, 10, 60, 0.6);
  --sokoban-text-primary: rgba(236, 220, 255, 0.95);
  --sokoban-text-muted: rgba(214, 182, 255, 0.72);
  --sokoban-floor-bg: linear-gradient(150deg, rgba(60, 20, 108, 0.92), rgba(36, 16, 72, 0.88));
  --sokoban-target-ring: rgba(178, 120, 255, 0.75);
  --sokoban-target-core: rgba(124, 82, 255, 0.36);
  --sokoban-box-bg: linear-gradient(140deg, rgba(246, 144, 216, 0.95), rgba(226, 92, 168, 0.92));
  --sokoban-box-highlight: rgba(255, 226, 246, 0.76);
  --sokoban-player-bg: linear-gradient(140deg, rgba(112, 236, 255, 0.95), rgba(144, 120, 255, 0.92));
  --sokoban-player-glow: rgba(180, 120, 255, 0.85);
}

body.theme-aurora .page--sokoban {
  --sokoban-surface: linear-gradient(160deg, rgba(12, 54, 44, 0.92), rgba(8, 28, 24, 0.94));
  --sokoban-border: rgba(96, 236, 206, 0.4);
  --sokoban-shadow: 0 28px 48px rgba(6, 36, 28, 0.55);
  --sokoban-text-primary: rgba(214, 250, 240, 0.92);
  --sokoban-text-muted: rgba(178, 236, 216, 0.74);
  --sokoban-floor-bg: linear-gradient(150deg, rgba(18, 76, 66, 0.92), rgba(12, 40, 34, 0.9));
  --sokoban-target-ring: rgba(90, 246, 210, 0.7);
  --sokoban-target-core: rgba(70, 220, 180, 0.32);
  --sokoban-box-bg: linear-gradient(140deg, rgba(246, 196, 124, 0.95), rgba(210, 152, 84, 0.92));
  --sokoban-box-highlight: rgba(255, 240, 206, 0.75);
  --sokoban-player-bg: linear-gradient(140deg, rgba(108, 246, 208, 0.95), rgba(84, 182, 246, 0.92));
  --sokoban-player-glow: rgba(120, 246, 210, 0.78);
}
